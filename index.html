<!DOCTYPE html>
<html>
	<head>
		<title> Etch-a-Sketch!</title>
		<link rel="stylesheet" type="text/css" href="etchasketch.css">
	</head>
	<body>
		<h1>Etch-a-Sketch!</h1>
		<button id="button">Reset</button>
		<div class="gridsize"> 
			<h4>Grid size</h4>
			<input type="text" placeholder="gimme a number">
		</div>
		<div id="container"></div>
		<script type="text/javascript">
			let bigGrid = document.querySelector('#container');
			let reset = document.querySelector('button');
			let gridsize = document.querySelector('input');
			reset.addEventListener('click', function(){
				window.location.reload();
			});

			window.addEventListener('load', grid(20));	
			
			function grid(size){
				let sides = size;
				let numbOfDivs = sides * sides;
				let boxSize = 500/sides;
				for (i =0; i < numbOfDivs; i++){
					const cells = document.createElement('div');
					cells.classList.add('square');
					cells.style.width = boxSize + 'px';
					cells.style.height = boxSize + 'px';
					cells.addEventListener("mouseover", function(event){
						event.target.style.backgroundColor = "rgba(100, 0, 100, 100)";
						setTimeout(function(){
							event.target.style.backgroundColor = "rgba(100, 0, 100, 75%)";
						}, 250)
						setTimeout(function(){
							event.target.style.backgroundColor = "rgba(100, 0, 100, 50%)";
						}, 500)
						setTimeout(function(){
							event.target.style.backgroundColor = "";
						}, 1000);
					}, false);
					bigGrid.appendChild(cells);
				}
			}
		
		gridsize.addEventListener('keydown', function (e) {
			if (e.keyCode === 13) {
			container.innerHTML = "";
			grid(gridsize.value);
	}

});

		</script>
	</body>
</html>